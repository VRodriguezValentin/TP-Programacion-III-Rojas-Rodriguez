<%- include('partials/header'); -%>

<% if (sessionMessage) { %>
    <div id="modalConfirmacion" class="modal-confirmacion" style="display:flex;">
        <div class="modal-contenido">
            <h2> <%= sessionMessage %> </h2>
            <div class="modal-botones">
                <button id="btnConfirmarModal" class="btn-finalizar">Aceptar</button>
            </div>
        </div>
    </div>
<% } %>

<script>
    const modal = document.getElementById('modalConfirmacion');
    const btnConfirmarModal = document.getElementById('btnConfirmarModal');

    btnConfirmarModal.addEventListener("click", (e) => {
        e.preventDefault();
        modal.style.display = "none";
    });
</script>

<% if (loginSuccess) { %>
    <div class="container-loader">
        <div style="display: flex; justify-content: center; align-items: center;">
            <h2>Iniciando sesion</h2>
        </div>
        <div class="loader">
            <div class="circle">
                <div class="dot"></div>
                <div class="outline"></div>
            </div>
            <div class="circle">
                <div class="dot"></div>
                <div class="outline"></div>
            </div>
            <div class="circle">
                <div class="dot"></div>
                <div class="outline"></div>
            </div>
            <div class="circle">
                <div class="dot"></div>
                <div class="outline"></div>
            </div>
        </div>
    </div>

    <script>
        setTimeout(function() {
            window.location.href = '/dashboard';
        }, 2000);
    </script>
<% } %>

<button class="btn-login-top" onclick="location.href='/'">
    <i class="fa fa-user"></i>
</button>

<button id="accessRoot" class="btn-dir-access">
    <i class="fa-regular fa-circle-user"></i>
</button>

<% if (!loginSuccess) { %>
<div class="containerLogin">

    <img src="./img/PocketStore.png" alt="Logo de PocketStore" class="logo-login">

    <form method="POST" action="/loginInfo">
        <div id="divLogin" class="caja">

            <label for="email">Email</label>
            <input id="email" name="email" type="text"
                placeholder="Ingrese su email"
                value="<%= typeof oldData !== 'undefined' && oldData.email ? oldData.email : '' %>"
                required>

            <label for="password">Contraseña</label>
            <input id="password" name="password" type="password" placeholder="Ingrese su contraseña"
                required>

            <div class="botonera-login">
                <a href="/createAccount" class="button">Crear cuenta</a>
                <button id="btnLogin" type="submit" class="button">Iniciar Sesion</button>
            </div>
        </div>
    </form>
<% } %>
</div>

<script>
    const buttonRoot = document.getElementById('accessRoot');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    
    buttonRoot.addEventListener("click", (e) => {
        email.value = 'admin@pocketstore.com';
        password.value = 'admin123';
    });
</script>

<%- include('partials/header'); -%>